<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Phishing</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
      integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js+-"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Josefin+Sans|Russo+One"
      rel="stylesheet"
    />
    <link href="./plugin_ui.css" type="text/css" rel="stylesheet" />
  </head>
  <body>
    <h1 style="font-size: 25px">An AI-enabled Phishing Detection</h1>

    <div id="res-circle">
      <h1 id="site_score"></h1>
    </div>

    <h2 id="site_msg" style="margin-bottom: 10%">
      Loading....................
    </h2>
    <div id="search-bar">
      <textarea
        id="message"
        name="message"
        placeholder="Enter your message"
      ></textarea>
      <button onclick="sendDataToPython()" class="button-85" id="getEmailId">
        Scan Emails / SMS
      </button>
    </div>
    <p id="result"></p>
    <ul id="features"></ul>
    <div id="services"></div>

    <script>
      async function sendDataToPython() {
        var userInput = document.getElementById("message").value.trim(); // Get the trimmed value from the input field
        if (userInput) {
          // Check if userInput is not empty
          try {
            const response = await fetch(
              `http://localhost:8000/send_data?data=${encodeURIComponent(
                userInput
              )}`
            );
            if (!response.ok) {
              throw new Error(`HTTP error! Status: ${response.status}`);
            }
            const result = await response.text();
            document.getElementById("result").innerHTML = result;
          } catch (error) {
            console.error("Error sending data:", error);
          }
        } else {
          alert("Please enter something!");
        }
      }
    </script>
    <script src="js/jquery.js" type="text/javascript"></script>
    <script src="./main.js" type="text/javascript"></script>
  </body>
</html>
